

top down

client
- fairly dumb initially
- SPA later for offloading

webapp
- terminate SSL
- rate limit
- shdict cache of redis
- LRU cache for common tables
- geoip later

worker
- process client input
- update mysql/redis
- calculate which subs need updating and update them

redis
- cache of frequent mysql requests
- outputs json
- sorted sets of all posts per filta for both date and score

mysql
- stores everything


push v pull redis
options:
redis loads from mysql when it cant find something
  - more logic
  - needs to contact mysql for every miss
  - needs to write to master redis

worker checks redis to see whats missing
adds anything missing from mysql
  - messy to check
  - no mysql calls on redis miss
